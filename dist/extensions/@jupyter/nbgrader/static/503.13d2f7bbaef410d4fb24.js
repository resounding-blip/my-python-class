"use strict";(self.webpackChunk_jupyter_nbgrader=self.webpackChunk_jupyter_nbgrader||[]).push([[503],{503:(t,e,i)=>{i.r(e),i.d(e,{INotebookPathOpener:()=>A,INotebookShell:()=>x,NotebookApp:()=>B,NotebookShell:()=>S,PanelHandler:()=>P,Private:()=>L,SidePanelHandler:()=>H,SidePanelPalette:()=>C,defaultNotebookPathOpener:()=>O});var n=i(161),s=i(963),r=i(594),a=i(251),o=i(458),d=i(960),l=i(262),h=i(197);const p=new l.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");var u;!function(t){function e(i){return i&&i.type?"tab-area"===i.type?{type:"tab-area",currentIndex:i.currentIndex,widgets:i.widgets.map((e=>t.nameProperty.get(e))).filter((t=>!!t))}:{type:"split-area",orientation:i.orientation,sizes:i.sizes,children:i.children.map(e).filter((t=>!!t))}:null}function i(t,e){if(!t)return null;const n=t.type||"unknown";if("unknown"===n||"tab-area"!==n&&"split-area"!==n)return console.warn(`Attempted to deserialize unknown type: ${n}`),null;if("tab-area"===n){const{currentIndex:i,widgets:n}=t,s={type:"tab-area",currentIndex:i||0,widgets:n&&n.map((t=>e.get(t))).filter((t=>!!t))||[]};return s.currentIndex>s.widgets.length-1&&(s.currentIndex=0),s}const{orientation:s,sizes:r,children:a}=t;return{type:"split-area",orientation:s,sizes:r||[],children:a&&a.map((t=>i(t,e))).filter((t=>!!t))||[]}}t.nameProperty=new h.AttachedProperty({name:"name",create:t=>""}),t.serializeMain=function(i){const n={dock:i&&i.dock&&e(i.dock.main)||null};if(i&&i.currentWidget){const e=t.nameProperty.get(i.currentWidget);e&&(n.current=e)}return n},t.deserializeMain=function(t,e){if(!t)return null;const n=t.current||null,s=t.dock||null;return{currentWidget:n&&e.has(n)&&e.get(n)||null,dock:s?{main:i(s,e)}:null}}}(u||(u={}));const c=new l.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");var g;!function(t){t.factoryNameProperty=new h.AttachedProperty({name:"factoryName",create:()=>{}})}(g||(g={}));var _=i(12),m=i(602);class y{constructor(t){this._busyCount=0,this._dirtyCount=0,this._busySignal=new m.Signal(t),this._dirtySignal=new m.Signal(t)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const t=this.isDirty;return this._dirtyCount++,this.isDirty!==t&&this._dirtySignal.emit(this.isDirty),new _.DisposableDelegate((()=>{const t=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1),this.isDirty!==t&&this._dirtySignal.emit(this.isDirty)}))}setBusy(){const t=this.isBusy;return this._busyCount++,this.isBusy!==t&&this._busySignal.emit(this.isBusy),new _.DisposableDelegate((()=>{const t=this.isBusy;this._busyCount--,this.isBusy!==t&&this._busySignal.emit(this.isBusy)}))}}var f,w=i(597),k=i(583),W=i(53),b=i(256),v=i(230);class P{constructor(){this._panelChildHook=(t,e)=>{if("child-removed"===e.type){const t=e.child;W.ArrayExt.removeFirstWhere(this._items,(e=>e.widget===t))}return!0},this._items=new Array,this._panel=new b.Panel,v.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,e){t.parent=null;const i={widget:t,rank:e},n=W.ArrayExt.upperBound(this._items,i,f.itemCmp);W.ArrayExt.insert(this._items,n,i),this._panel.insertWidget(n,t)}}class H extends P{constructor(t){super(),this._isHiddenByUser=!1,this._widgetAdded=new m.Signal(this),this._widgetRemoved=new m.Signal(this),this._area=t,this._panel.hide(),this._currentWidget=null,this._lastCurrentWidget=null,this._widgetPanel=new b.StackedPanel,this._widgetPanel.widgetRemoved.connect(this._onWidgetRemoved,this),this._closeButton=document.createElement("button"),d.closeIcon.element({container:this._closeButton,height:"16px",width:"auto"}),this._closeButton.onclick=()=>{this.collapse(),this.hide()},this._closeButton.className="jp-Button jp-SidePanel-collapse",this._closeButton.title="Collapse side panel";const e=new b.Widget({node:this._closeButton});this._panel.addWidget(e),this._panel.addWidget(this._widgetPanel)}get currentWidget(){return this._currentWidget||this._lastCurrentWidget||(this._items.length>0?this._items[0].widget:null)}get area(){return this._area}get isVisible(){return this._panel.isVisible}get panel(){return this._panel}get widgets(){return this._items.map((t=>t.widget))}get widgetAdded(){return this._widgetAdded}get widgetRemoved(){return this._widgetRemoved}get closeButton(){return this._closeButton}expand(t){t?this._currentWidget&&this._currentWidget.id===t?(this.collapse(),this.hide()):(this.collapse(),this.hide(),this.activate(t),this.show()):this.currentWidget&&(this._currentWidget=this.currentWidget,this.activate(this._currentWidget.id),this.show())}activate(t){const e=this._findWidgetByID(t);e&&(this._currentWidget=e,e.show(),e.activate())}has(t){return null!==this._findWidgetByID(t)}collapse(){var t;null===(t=this._currentWidget)||void 0===t||t.hide(),this._currentWidget=null}addWidget(t,e){t.parent=null,t.hide();const i={widget:t,rank:e},n=this._findInsertIndex(i);W.ArrayExt.insert(this._items,n,i),this._widgetPanel.insertWidget(n,t),this._refreshVisibility(),this._widgetAdded.emit(t)}hide(){this._isHiddenByUser=!0,this._refreshVisibility()}show(){this._isHiddenByUser=!1,this._refreshVisibility()}_findInsertIndex(t){return W.ArrayExt.upperBound(this._items,t,f.itemCmp)}_findWidgetIndex(t){return W.ArrayExt.findFirstIndex(this._items,(e=>e.widget===t))}_findWidgetByID(t){const e=(0,W.find)(this._items,(e=>e.widget.id===t));return e?e.widget:null}_refreshVisibility(){this._panel.setHidden(this._isHiddenByUser)}_onWidgetRemoved(t,e){e===this._lastCurrentWidget&&(this._lastCurrentWidget=null),W.ArrayExt.removeAt(this._items,this._findWidgetIndex(e)),this._refreshVisibility(),this._widgetRemoved.emit(e)}}class C{constructor(t){this._items=[],this._commandPalette=t.commandPalette,this._command=t.command}getItem(t,e){const i=this._items;for(let n=0;n<i.length;n++){const s=i[n];if(s.widgetId===t.id&&s.area===e)return s}return null}addItem(t,e){if(this.getItem(t,e))return;const i=this._commandPalette.addItem({command:this._command,category:"View",args:{side:e,title:`Show ${t.title.caption}`,id:t.id}});this._items.push({widgetId:t.id,area:e,disposable:i})}removeItem(t,e){const i=this.getItem(t,e);i&&i.disposable.dispose()}}!function(t){t.itemCmp=function(t,e){return t.rank-e.rank}}(f||(f={}));const x=new l.Token("@jupyter-notebook/application:INotebookShell");class S extends b.Widget{constructor(){super(),this._translator=o.nullTranslator,this._currentChanged=new m.Signal(this),this._mainWidgetLoaded=new l.PromiseDelegate,this.id="main",this._userLayout={},this._topHandler=new P,this._menuHandler=new P,this._leftHandler=new H("left"),this._rightHandler=new H("right"),this._main=new b.Panel;const t=this._topWrapper=new b.Panel,e=this._menuWrapper=new b.Panel;this._topHandler.panel.id="top-panel",this._topHandler.panel.node.setAttribute("role","banner"),this._menuHandler.panel.id="menu-panel",this._menuHandler.panel.node.setAttribute("role","navigation"),this._main.id="main-panel",this._main.node.setAttribute("role","main"),this._spacer_top=new b.Widget,this._spacer_top.id="spacer-widget-top",this._spacer_bottom=new b.Widget,this._spacer_bottom.id="spacer-widget-bottom",t.id="top-panel-wrapper",t.addWidget(this._topHandler.panel),e.id="menu-panel-wrapper",e.addWidget(this._menuHandler.panel);const i=new b.BoxLayout,n=this._leftHandler,s=this._rightHandler;n.panel.id="jp-left-stack",n.panel.node.setAttribute("role","complementary"),s.panel.id="jp-right-stack",s.panel.node.setAttribute("role","complementary"),n.hide(),s.hide();const r=new b.BoxLayout({spacing:0,direction:"top-to-bottom"});b.BoxLayout.setStretch(this._topWrapper,0),b.BoxLayout.setStretch(this._menuWrapper,0),b.BoxLayout.setStretch(this._main,1);const a=new b.Panel({layout:r});a.addWidget(this._topWrapper),a.addWidget(this._menuWrapper),a.addWidget(this._spacer_top),a.addWidget(this._main),a.addWidget(this._spacer_bottom),a.layout=r;const d=new b.SplitPanel;d.id="main-split-panel",d.spacing=1,b.BoxLayout.setStretch(d,1),b.SplitPanel.setStretch(n.panel,0),b.SplitPanel.setStretch(s.panel,0),b.SplitPanel.setStretch(a,1),d.addWidget(n.panel),d.addWidget(a),d.addWidget(s.panel),d.setRelativeSizes([1,2.5,1]),i.spacing=0,i.addWidget(d),this.layout=i;const h=this._skipLinkWidgetHandler=new L.SkipLinkWidgetHandler(this);this.add(h.skipLinkWidget,"top",{rank:0}),this._skipLinkWidgetHandler.show()}get currentChanged(){return this._currentChanged}get currentWidget(){var t;return null!==(t=this._main.widgets[0])&&void 0!==t?t:null}get top(){return this._topWrapper}get menu(){return this._menuWrapper}get leftHandler(){return this._leftHandler}get rightHandler(){return this._rightHandler}get leftCollapsed(){return!(this._leftHandler.isVisible&&this._leftHandler.panel.isVisible)}get rightCollapsed(){return!(this._rightHandler.isVisible&&this._rightHandler.panel.isVisible)}get restored(){return this._mainWidgetLoaded.promise}get translator(){var t;return null!==(t=this._translator)&&void 0!==t?t:o.nullTranslator}set translator(t){if(t!==this._translator){this._translator=t;const e=t.load("notebook");this._leftHandler.closeButton.title=e.__("Collapse %1 side panel",this._leftHandler.area),this._rightHandler.closeButton.title=e.__("Collapse %1 side panel",this._rightHandler.area)}}get userLayout(){return l.JSONExt.deepCopy(this._userLayout)}activateById(t){for(const e of["main","top","left","right","menu"]){const i=(0,W.find)(this.widgets(e),(e=>e.id===t));i&&("left"===e?this.expandLeft(t):"right"===e?this.expandRight(t):i.activate())}}add(t,e,i){var n,s;let r;r=(null==i?void 0:i.type)&&this._userLayout[i.type]?this._userLayout[i.type]:this._userLayout[t.id],e=null!==(n=null==r?void 0:r.area)&&void 0!==n?n:e;const a=null!==(s=null==(i=i||(null==r?void 0:r.options)?{...i,...null==r?void 0:r.options}:void 0)?void 0:i.rank)&&void 0!==s?s:900;switch(e){case"top":return this._topHandler.addWidget(t,a);case"menu":return this._menuHandler.addWidget(t,a);case"main":case void 0:{if(this._main.widgets.length>0)return;const e=this.currentWidget;this._main.addWidget(t),this._main.update(),this._currentChanged.emit({newValue:t,oldValue:e}),this._mainWidgetLoaded.resolve();break}case"left":return this._leftHandler.addWidget(t,a);case"right":return this._rightHandler.addWidget(t,a);default:console.warn(`Cannot add widget to area: ${e}`)}}collapseTop(){this._topWrapper.setHidden(!0),this._spacer_top.setHidden(!0)}expandTop(){this._topWrapper.setHidden(!1),this._spacer_top.setHidden(!1)}*widgets(t){switch(null!=t?t:"main"){case"top":return void(yield*this._topHandler.panel.widgets);case"menu":return void(yield*this._menuHandler.panel.widgets);case"main":return void(yield*this._main.widgets);case"left":return void(yield*this._leftHandler.widgets);case"right":return void(yield*this._rightHandler.widgets);default:return void console.error(`This shell has no area called "${t}"`)}}expandLeft(t){this._leftHandler.panel.show(),this._leftHandler.expand(t)}collapseLeft(){this._leftHandler.collapse(),this._leftHandler.panel.hide()}expandRight(t){this._rightHandler.panel.show(),this._rightHandler.expand(t)}collapseRight(){this._rightHandler.collapse(),this._rightHandler.panel.hide()}async restoreLayout(t){this._userLayout=t}}var L,I;!function(t){t.SkipLinkWidgetHandler=class{constructor(t){this._isDisposed=!1;const e=this._skipLinkWidget=new b.Widget,i=document.createElement("a");i.href="#first-cell",i.tabIndex=1,i.text="Skip to Main",i.className="skip-link",i.addEventListener("click",this),e.addClass("jp-skiplink"),e.id="jp-skiplink",e.node.appendChild(i)}handleEvent(t){"click"===t.type&&this._focusMain()}_focusMain(){const t=document.querySelector("#main-panel .jp-InputArea-editor");t.tabIndex=1,t.focus()}get skipLinkWidget(){return this._skipLinkWidget}dispose(){this.isDisposed||(this._isDisposed=!0,this._skipLinkWidget.node.removeEventListener("click",this),this._skipLinkWidget.dispose())}hide(){this._skipLinkWidget.hide()}show(){this._skipLinkWidget.show()}get isDisposed(){return this._isDisposed}}}(L||(L={}));class B extends n.JupyterFrontEnd{constructor(t={shell:new S}){var e,i;if(super({...t,shell:null!==(e=t.shell)&&void 0!==e?e:new S}),this.name="Jupyter Notebook",this.namespace=this.name,this.status=new y(this),this.version=null!==(i=w.PageConfig.getOption("appVersion"))&&void 0!==i?i:"unknown",this._info=n.JupyterLab.defaultInfo,this._formatter=new k.Throttler((()=>{I.setFormat(this)}),250),this.docRegistry.addModelFactory(new s.Base64ModelFactory),t.mimeExtensions)for(const e of function(t){const e=[],i=new r.WidgetTracker({namespace:"application-mimedocuments"});return t.forEach((t=>{let n=t.default;t.hasOwnProperty("__esModule")||(n=t),Array.isArray(n)||(n=[n]),n.forEach((t=>{e.push(function(t,e){return{id:e.id,description:e.description,requires:[a.IRenderMimeRegistry,o.ITranslator],autoStart:!0,activate:(i,n,r)=>{if(void 0!==e.rank?n.addFactory(e.rendererFactory,e.rank):n.addFactory(e.rendererFactory),!e.documentWidgetFactoryOptions)return;const a=i.docRegistry;let o=[];o=Array.isArray(e.documentWidgetFactoryOptions)?e.documentWidgetFactoryOptions:[e.documentWidgetFactoryOptions],e.fileTypes&&e.fileTypes.forEach((t=>{t.icon&&(t={...t,icon:d.LabIcon.resolve({icon:t.icon})}),i.docRegistry.addFileType(t)})),o.forEach((i=>{const o=i.toolbarFactory?t=>i.toolbarFactory(t.content.renderer):void 0,d=new s.MimeDocumentFactory({renderTimeout:e.renderTimeout,dataType:e.dataType,rendermime:n,modelName:i.modelName,name:i.name,primaryFileType:a.getFileType(i.primaryFileType),fileTypes:i.fileTypes,defaultFor:i.defaultFor,defaultRendered:i.defaultRendered,toolbarFactory:o,translator:r,factory:e.rendererFactory});a.addWidgetFactory(d),d.widgetCreated.connect(((e,i)=>{g.factoryNameProperty.set(i,d.name),i.context.pathChanged.connect((()=>{t.save(i)})),t.add(i)}))}))}}}(i,t))}))})),e.push({id:"@jupyterlab/application:mimedocument",description:"Provides a mime document widget tracker.",optional:[p],provides:c,autoStart:!0,activate:(t,e)=>(e&&e.restore(i,{command:"docmanager:open",args:t=>({path:t.context.path,factory:g.factoryNameProperty.get(t)}),name:t=>`${t.context.path}:${g.factoryNameProperty.get(t)}`}),i)}),e}(t.mimeExtensions))this.registerPlugin(e);const l=Object.keys(n.JupyterLab.defaultInfo).reduce(((e,i)=>(i in t&&(e[i]=JSON.parse(JSON.stringify(t[i]))),e)),{});this._info={...n.JupyterLab.defaultInfo,...l},this.restored=this.shell.restored,this.restored.then((()=>this._formatter.invoke()))}get info(){return this._info}get paths(){return{urls:{base:w.PageConfig.getOption("baseUrl"),notFound:w.PageConfig.getOption("notFoundUrl"),app:w.PageConfig.getOption("appUrl"),static:w.PageConfig.getOption("staticUrl"),settings:w.PageConfig.getOption("settingsUrl"),themes:w.PageConfig.getOption("themesUrl"),doc:w.PageConfig.getOption("docUrl"),translations:w.PageConfig.getOption("translationsApiUrl"),hubHost:w.PageConfig.getOption("hubHost")||void 0,hubPrefix:w.PageConfig.getOption("hubPrefix")||void 0,hubUser:w.PageConfig.getOption("hubUser")||void 0,hubServerName:w.PageConfig.getOption("hubServerName")||void 0},directories:{appSettings:w.PageConfig.getOption("appSettingsDir"),schemas:w.PageConfig.getOption("schemasDir"),static:w.PageConfig.getOption("staticDir"),templates:w.PageConfig.getOption("templatesDir"),themes:w.PageConfig.getOption("themesDir"),userSettings:w.PageConfig.getOption("userSettingsDir"),serverRoot:w.PageConfig.getOption("serverRoot"),workspaces:w.PageConfig.getOption("workspacesDir")}}}handleEvent(t){super.handleEvent(t),"resize"===t.type&&this._formatter.invoke()}registerPluginModule(t){let e=t.default;Object.prototype.hasOwnProperty.call(t,"__esModule")||(e=t),Array.isArray(e)||(e=[e]),e.forEach((t=>{try{this.registerPlugin(t)}catch(t){console.error(t)}}))}registerPluginModules(t){t.forEach((t=>{this.registerPluginModule(t)}))}}!function(t){t.setFormat=function(t){t.format=window.matchMedia("only screen and (max-width: 760px)").matches?"mobile":"desktop"}}(I||(I={}));const O=new class{open(t){const{prefix:e,path:i,searchParams:n,target:s,features:r}=t,a=new URL(w.URLExt.join(e,null!=i?i:""),window.location.origin);return n&&(a.search=n.toString()),window.open(a,s,r)}},A=new l.Token("@jupyter-notebook/application:INotebookPathOpener")}}]);